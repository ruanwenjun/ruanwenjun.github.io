---
layout: post
title: JVM内存区域
tags: [深入理解Java虚拟机读书笔记]
---

目录：

* [程序计数器](#程序计数器)
* [JAVA虚拟机栈](#java虚拟机栈)
* [本地方法栈](#本地方法栈)
* [JAVA堆](#java堆)
* [方法区](#方法区)

Java虚拟机在运行时通常可以把管理的内存分为方法区、虚拟机栈、本地方法栈、堆、程序计数器这五大区域。

![image](https://ruanwenjun.github.io/images/2018-06-19/jvmmemory.png)

## 程序计数器
程序计数器可以看作当前线程执行的字节码的行号指示器，通过程序计数器可以知道执行的下一条指令是什么。每个线程都需要有自己的程序计数器，并且各个线程的计数器之间互不干扰。因此程序计数器是线程私有的。

## JAVA虚拟机栈
JAVA虚拟机栈也是线程私有的，它的生命周期与线程相同。每个方法在执行的过程中都会创建一个栈帧用于存储局部变量表、操作数栈、动态链接、方法出口等信息。其中局部变量表存放基本数据类型、对象的引用类型和returnAddress类型，局部变量表的内存大小在编译期间就已经确定，在运行期间不会改变。

## 本地方法栈
本地方法栈与JAVA虚拟机栈类似，只不过本地方法栈是专门为native方法服务。

## JAVA堆
JAVA堆是被所有线程共享的一块内存区域。此区域用来存放对象实例。

## 方法区
方法区和JAVA堆一样也是所有线程共享的区域，它用来存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。又被称为永久带代。其中有一块区域被称为运行时常量池，用于存储编译器生成的各种常量
