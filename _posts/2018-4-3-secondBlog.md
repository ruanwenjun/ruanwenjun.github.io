---
layout: post
title: 装饰者模式!
---
[TOC]

## 在进行程序开发过程中，很多时候我们需要为扩展当前程序中的类的方法。

比如：一开始的程序中有一只鸭子拥有fly方法，现在我们希望鸭子在飞的时候还能唱歌，或者是飞之后休息，那么我们会想到继承原来的鸭子（这违反了程序设计原则：少用继承），或者是直接修改鸭子类（这么做肯定是不科学的）。

有什么好的方法让我们既可以动态的扩展程序的方法，又不修改原来的类呢？

##  装饰者模式可以很好的达到实现。  

  装饰者模式能动态的将责任添加到类上，提供了比继承更具有弹性的代替方案。
实现的关键要求是装饰者与被装饰者要是同一对象，即他们需要继承自同一接口或是同一类。然后装饰者中拥有被装饰者的引用（利用到了组合的方式）。
例如jdk源码中的io包下就有许多装饰者模式的实现例子。
例如InputStream这是一个抽象类，他下面有一些实现类：FileInputStream,ByteArrayInputStream，AudioInputStream，StringBufferInputStream等，这些类都实现了InputStream的抽象方法，但是有一个类FilterInputStream，他虽然也继承自InputStream，但是却没有具体的实现方法，他有一个InputStream的引用，他的所有方法都是调用InputStream的方法，这就是一个“**抽象的装饰者基类**”,,他的一些子类就是具体的装饰者。

---

  以后在看到一个类中有一个抽象类或者接口的引用的时候，很大概率该类就是一个装饰者。
